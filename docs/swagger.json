{
    "swagger": "2.0",
    "info": {
        "version": "1.0.0",
        "title": "MAGE (Mobile Analytic GEOINT Environment)",
        "description": "MAGE API",
        "contact": {
            "name": "Benjamin Tuttle",
            "email": "benjamin.t.tuttle@nga.mil"
        },
        "license": {
            "name": "MIT",
            "url": "http://opensource.org/licenses/MIT"
        }
    },
    "consumes": [
        "application/json"
    ],
    "produces": [
        "application/json"
    ],
    "paths": {
        "/api/login": {
            "post": {
                "description": "login",
                "operationId": "login",
                "tags": [
                    "Authentication"
                ],
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "login request body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/LoginRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "login response",
                        "schema": {
                            "$ref": "#/definitions/LoginResponse"
                        }
                    }
                }
            }
        },
        "/api/logout": {
            "post": {
                "description": "logout",
                "operationId": "logout",
                "tags": [
                    "Authentication"
                ],
                "responses": {
                    "200": {
                        "description": "logout response"
                    }
                }
            }
        },
        "/api/users": {
            "get": {
                "description": "Returns all users",
                "operationId": "getUsers",
                "tags": [
                    "User"
                ],
                "responses": {
                    "200": {
                        "description": "user response",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Users"
                            }
                        }
                    }
                }
            },
            "post": {
                "description": "Creates a new user.  Duplicates usernames are not allowed",
                "operationId": "addUser",
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "user create body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/UserCreate"
                        }
                    }
                ],
                "tags": [
                    "User"
                ],
                "responses": {
                    "200": {
                        "description": "user response",
                        "schema": {
                            "$ref": "#/definitions/Users"
                        }
                    }
                }
            }
        },
        "/api/users/{id}": {
            "get": {
                "description": "Returns a single user based on id",
                "operationId": "getUserById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of user to fetch",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "User"
                ],
                "responses": {
                    "200": {
                        "description": "user response",
                        "schema": {
                            "$ref": "#/definitions/User"
                        }
                    }
                }
            },
            "put": {
                "description": "update a single user based on id",
                "operationId": "updateUserById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of user to update",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "body",
                        "in": "body",
                        "description": "user update body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/UserCreate"
                        }
                    }
                ],
                "tags": [
                    "User"
                ],
                "responses": {
                    "200": {
                        "description": "user update response",
                        "schema": {
                            "$ref": "#/definitions/User"
                        }
                    }
                }
            },
            "delete": {
                "description": "deletes a single user based on id",
                "operationId": "deleteUser",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of user to delete",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "User"
                ],
                "responses": {
                    "204": {
                        "description": "user deleted"
                    }
                }
            }
        },
        "/api/users/{id}/avatar": {
            "get": {
                "description": "Returns users avatar based on user id",
                "operationId": "getUserAvatar",
                "produces": [
                    "image/png",
                    "image/jpg",
                    "image/jpeg"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of user",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "User"
                ],
                "responses": {
                    "200": {
                        "description": "user avatar response"
                    }
                }
            }
        },
        "/api/users/{id}/icon": {
            "get": {
                "description": "Returns users map icon based on user id",
                "operationId": "getUserIcon",
                "produces": [
                    "image/png",
                    "image/jpg",
                    "image/jpeg"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of user",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "User"
                ],
                "responses": {
                    "200": {
                        "description": "user icon response"
                    }
                }
            }
        },
        "/api/users/{userId}/events/{eventId}/recent": {
            "post": {
                "description": "Adds event to top of recent list, capped at 5",
                "operationId": "addRecentEventForUser",
                "parameters": [
                    {
                        "name": "userId",
                        "in": "path",
                        "description": "id of user to add recent event",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "id of recent event",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "User"
                ],
                "responses": {
                    "200": {
                        "description": "user response",
                        "schema": {
                            "$ref": "#/definitions/User"
                        }
                    }
                }
            }
        },
        "/api/users/myself": {
            "get": {
                "description": "Returns user currently logged",
                "operationId": "getMyself",
                "tags": [
                    "User"
                ],
                "responses": {
                    "200": {
                        "description": "user currently logged in",
                        "schema": {
                            "$ref": "#/definitions/User"
                        }
                    }
                }
            },
            "put": {
                "description": "update myself",
                "operationId": "updateMyself",
                "tags": [
                    "User"
                ],
                "responses": {
                    "200": {
                        "description": "user update response",
                        "schema": {
                            "$ref": "#/definitions/User"
                        }
                    }
                }
            }
        },
        "/api/devices": {
            "get": {
                "description": "Returns all devices",
                "operationId": "getDevices",
                "tags": [
                    "Device"
                ],
                "responses": {
                    "200": {
                        "description": "device response",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Device"
                            }
                        }
                    }
                }
            },
            "post": {
                "description": "add new device",
                "operationId": "addDevice",
                "tags": [
                    "Device"
                ],
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "new device body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/DeviceCreate"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "new device response",
                        "schema": {
                            "$ref": "#/definitions/Device"
                        }
                    }
                }
            }
        },
        "/api/roles": {
            "get": {
                "description": "get all roles",
                "operationId": "getRoles",
                "tags": [
                    "Role"
                ],
                "responses": {
                    "200": {
                        "description": "role response",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Role"
                            }
                        }
                    }
                }
            }
        },
        "/api/roles/{id}": {
            "get": {
                "description": "get role by id",
                "operationId": "getRoleById",
                "tags": [
                    "Role"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of role to fetch",
                        "required": true,
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "role response",
                        "schema": {
                            "$ref": "#/definitions/Role"
                        }
                    }
                }
            }
        },
        "/api/devices/{id}": {
            "get": {
                "description": "Returns a single device based on id",
                "operationId": "getDeviceById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of device to fetch",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "Device"
                ],
                "responses": {
                    "200": {
                        "description": "device response",
                        "schema": {
                            "$ref": "#/definitions/Device"
                        }
                    }
                }
            },
            "put": {
                "description": "update a single device based on id",
                "operationId": "updateDeviceById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of device to update",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "body",
                        "in": "body",
                        "description": "device update body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/DeviceCreate"
                        }
                    }
                ],
                "tags": [
                    "Device"
                ],
                "responses": {
                    "200": {
                        "description": "device update response",
                        "schema": {
                            "$ref": "#/definitions/Device"
                        }
                    }
                }
            },
            "delete": {
                "description": "deletes a single device based on id",
                "operationId": "deleteDevice",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of device to delete",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "Device"
                ],
                "responses": {
                    "204": {
                        "description": "user deleted"
                    }
                }
            }
        },
        "/api/teams": {
            "get": {
                "description": "get all teams",
                "operationId": "getTeams",
                "tags": [
                    "Team"
                ],
                "responses": {
                    "200": {
                        "description": "team response",
                        "schema": {
                            "$ref": "#/definitions/Team"
                        }
                    }
                }
            },
            "post": {
                "description": "add new team",
                "operationId": "addTeam",
                "tags": [
                    "Team"
                ],
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "new team body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/TeamCreate"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "new team response",
                        "schema": {
                            "$ref": "#/definitions/Team"
                        }
                    }
                }
            }
        },
        "/api/teams/{id}": {
            "get": {
                "description": "Returns a single team based on id",
                "operationId": "getTeamById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of team to fetch",
                        "required": true,
                        "type": "number"
                    }
                ],
                "tags": [
                    "Team"
                ],
                "responses": {
                    "200": {
                        "description": "team response",
                        "schema": {
                            "$ref": "#/definitions/Team"
                        }
                    }
                }
            },
            "put": {
                "description": "update a single team based on id",
                "operationId": "updateTeamById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of team to update",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "body",
                        "in": "body",
                        "description": "team update body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/TeamCreate"
                        }
                    }
                ],
                "tags": [
                    "Team"
                ],
                "responses": {
                    "200": {
                        "description": "team update response",
                        "schema": {
                            "$ref": "#/definitions/Team"
                        }
                    }
                }
            },
            "delete": {
                "description": "deletes a single team based on id",
                "operationId": "deleteTeam",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of team to delete",
                        "required": true,
                        "type": "number"
                    }
                ],
                "tags": [
                    "Team"
                ],
                "responses": {
                    "204": {
                        "description": "team deleted"
                    }
                }
            }
        },
        "/api/events": {
            "get": {
                "description": "get all events",
                "operationId": "getEvents",
                "tags": [
                    "Event"
                ],
                "parameters": [
                    {
                        "name": "userId",
                        "in": "query",
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "event response",
                        "schema": {
                            "$ref": "#/definitions/Event"
                        }
                    }
                }
            },
            "post": {
                "description": "add new event",
                "operationId": "addEvent",
                "tags": [
                    "Event"
                ],
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "new event body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/EventCreate"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "new event response",
                        "schema": {
                            "$ref": "#/definitions/Event"
                        }
                    }
                }
            }
        },
        "/api/events/{id}": {
            "get": {
                "description": "Returns a single event based on id",
                "operationId": "getEventById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of event to fetch",
                        "required": true,
                        "type": "number"
                    }
                ],
                "tags": [
                    "Event"
                ],
                "responses": {
                    "200": {
                        "description": "event response",
                        "schema": {
                            "$ref": "#/definitions/Event"
                        }
                    }
                }
            },
            "put": {
                "description": "update a single event based on id",
                "operationId": "updateEventById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of event to update",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "body",
                        "in": "body",
                        "description": "event update body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/EventCreate"
                        }
                    }
                ],
                "tags": [
                    "Event"
                ],
                "responses": {
                    "200": {
                        "description": "event update response",
                        "schema": {
                            "$ref": "#/definitions/Event"
                        }
                    }
                }
            },
            "delete": {
                "description": "deletes a single event based on id",
                "operationId": "deleteEvent",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of event to delete",
                        "required": true,
                        "type": "number"
                    }
                ],
                "tags": [
                    "Event"
                ],
                "responses": {
                    "204": {
                        "description": "event deleted"
                    }
                }
            }
        },
        "/api/events/{id}/form.zip": {
            "get": {
                "description": "Export a zip archive of the form .  Includes metadata and icon symbology",
                "operationId": "getFormArchive",
                "produces": [
                    "application/zip"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of event to fetch",
                        "required": true,
                        "type": "number"
                    }
                ],
                "tags": [
                    "Event"
                ],
                "responses": {
                    "200": {
                        "description": "form archive response"
                    }
                }
            }
        },
        "/api/events/{eventId}/form/icons.zip": {
            "get": {
                "description": "get all icons",
                "operationId": "getIcons",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "eventId in which icon resides",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "Event"
                ],
                "responses": {
                    "200": {
                        "description": "icon response"
                    }
                }
            }
        },
        "/api/events/{eventId}/form/icons/{type}/{variant}": {
            "get": {
                "description": "Returns a single form based on id",
                "operationId": "getIcon",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "eventId in which icon resides",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "type",
                        "in": "path",
                        "description": "icon type",
                        "type": "string"
                    },
                    {
                        "name": "variant",
                        "in": "path",
                        "description": "variant type",
                        "type": "string"
                    }
                ],
                "tags": [
                    "Event"
                ],
                "responses": {
                    "200": {
                        "description": "form response"
                    }
                }
            },
            "post": {
                "description": "add new icon",
                "operationId": "addIcon",
                "tags": [
                    "Event"
                ],
                "consumes": [
                    "mutipart/form-data"
                ],
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "eventId in which icon resides",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "type",
                        "in": "path",
                        "description": "icon type",
                        "type": "string"
                    },
                    {
                        "name": "variant",
                        "in": "path",
                        "description": "variant type",
                        "type": "string"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "new icon response"
                    }
                }
            },
            "delete": {
                "description": "deletes a single icon",
                "operationId": "deleteIcon",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "eventId in which icon resides",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "type",
                        "in": "path",
                        "description": "icon type",
                        "type": "string"
                    },
                    {
                        "name": "variant",
                        "in": "path",
                        "description": "variant type",
                        "type": "string"
                    }
                ],
                "tags": [
                    "Event"
                ],
                "responses": {
                    "204": {
                        "description": "icon deleted"
                    }
                }
            }
        },
        "/api/events/{eventId}/observations": {
            "get": {
                "description": "get all observations for event",
                "operationId": "getObservations",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "eventId in which to retrieve observations",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "fields",
                        "in": "query",
                        "description": "feature fields to project in response (JSON)",
                        "type": "string"
                    },
                    {
                        "name": "startDate",
                        "in": "query",
                        "type": "string",
                        "format": "dateTime"
                    },
                    {
                        "name": "endDate",
                        "in": "query",
                        "type": "string",
                        "format": "dateTime"
                    },
                    {
                        "name": "bbox",
                        "description": "bounding box array [minx,miny,maxx,maxy]",
                        "in": "query",
                        "type": "array",
                        "items": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "states",
                        "in": "query",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                ],
                "tags": [
                    "Observation"
                ],
                "responses": {
                    "200": {
                        "description": "observation response",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Feature"
                            }
                        }
                    }
                }
            },
            "post": {
                "description": "add new observation",
                "operationId": "addObservation",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "eventId for which to create observation",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "body",
                        "in": "body",
                        "description": "observation request body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/Feature"
                        }
                    }
                ],
                "tags": [
                    "Observation"
                ],
                "responses": {
                    "200": {
                        "description": "observation response",
                        "schema": {
                            "$ref": "#/definitions/Feature"
                        }
                    }
                }
            }
        },
        "/api/events/{eventId}/observations/{observationId}": {
            "get": {
                "description": "get observation for eventId",
                "operationId": "getObservation",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "eventId in which to retrieve observation",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "observationId",
                        "in": "path",
                        "description": "observationId for observation",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "fields",
                        "in": "query",
                        "description": "feature fields to project in response (JSON)",
                        "type": "string"
                    },
                    {
                        "name": "startDate",
                        "in": "query",
                        "type": "string",
                        "format": "dateTime"
                    },
                    {
                        "name": "endDate",
                        "in": "query",
                        "type": "string",
                        "format": "dateTime"
                    },
                    {
                        "name": "bbox",
                        "description": "bounding box array [minx,miny,maxx,maxy]",
                        "in": "query",
                        "type": "array",
                        "items": {
                            "type": "number"
                        }
                    },
                    {
                        "name": "states",
                        "in": "query",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                ],
                "tags": [
                    "Observation"
                ],
                "responses": {
                    "200": {
                        "description": "observation response",
                        "schema": {
                            "$ref": "#/definitions/Feature"
                        }
                    }
                }
            },
            "put": {
                "description": "update observation for eventId",
                "operationId": "updateObservation",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "eventId in which to update observation",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "observationId",
                        "in": "path",
                        "description": "observationId for observation",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "body",
                        "in": "body",
                        "description": "observation request body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/Feature"
                        }
                    }
                ],
                "tags": [
                    "Observation"
                ],
                "responses": {
                    "200": {
                        "description": "observation response",
                        "schema": {
                            "$ref": "#/definitions/Feature"
                        }
                    }
                }
            }
        },
        "/api/events/{eventId}/observations/{observationId}/states": {
            "post": {
                "description": "update state on provided observation for provided event",
                "operationId": "addObservationState",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "eventId in which to update observation state",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "observationId",
                        "in": "path",
                        "description": "observationId for observation",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "body",
                        "in": "body",
                        "description": "state request body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/FeatureStateCreate"
                        }
                    }
                ],
                "tags": [
                    "Observation"
                ],
                "responses": {
                    "200": {
                        "description": "observation response",
                        "schema": {
                            "$ref": "#/definitions/FeatureState"
                        }
                    }
                }
            }
        },
        "/api/events/{eventId}/observations/{observationId}/attachments": {
            "get": {
                "description": "get attachments for observation in event",
                "operationId": "getAttachments",
                "produces": [
                    "application/octet-stream"
                ],
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "eventId in which to retrieve observation attachments",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "observationId",
                        "in": "path",
                        "description": "observationId for observation",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "Observation"
                ],
                "responses": {
                    "200": {
                        "description": "attachment response",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Attachment"
                            }
                        }
                    }
                }
            },
            "post": {
                "description": "add new attachment",
                "operationId": "addAttachment",
                "consumes": [
                    "mulitpart/form-data"
                ],
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "eventId in which to create attachment",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "observationId",
                        "in": "path",
                        "description": "observationId in which to create attachment",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "attachment",
                        "in": "formData",
                        "type": "file",
                        "description": "attachment",
                        "required": true
                    }
                ],
                "tags": [
                    "Observation"
                ],
                "responses": {
                    "200": {
                        "description": "attachment response"
                    }
                }
            }
        },
        "/api/events/{eventId}/observations/{observationId}/attachments/{attachmentId}": {
            "get": {
                "description": "get attachment for observation in event",
                "operationId": "getAttachment",
                "produces": [
                    "application/octet-stream"
                ],
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "eventId in which to retrieve observation",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "observationId",
                        "in": "path",
                        "description": "observationId for observation",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "attachmentId",
                        "in": "path",
                        "description": "id of attachment to fetch",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "Observation"
                ],
                "responses": {
                    "200": {
                        "description": "attachment response"
                    }
                }
            },
            "put": {
                "description": "update attachment for observation in event",
                "operationId": "updateAttachment",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "eventId in which to update observation attachment",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "observationId",
                        "in": "path",
                        "description": "observationId for observation",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "attachmentId",
                        "in": "path",
                        "description": "id of attachment to update",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "attachment",
                        "in": "formData",
                        "type": "file",
                        "description": "attachment",
                        "required": true
                    }
                ],
                "tags": [
                    "Observation"
                ],
                "responses": {
                    "200": {
                        "description": "attachment response"
                    }
                }
            },
            "delete": {
                "description": "delete attachment for observation in event",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "eventId in which to retrieve features",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "observationId",
                        "in": "path",
                        "description": "observationId for feature",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "attachmentId",
                        "in": "path",
                        "description": "id of attachment to update",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "Observation"
                ],
                "responses": {
                    "200": {
                        "description": "attachment delete"
                    }
                }
            }
        },
        "/api/layers": {
            "get": {
                "description": "get all layers",
                "operationId": "getLayers",
                "tags": [
                    "Layer"
                ],
                "responses": {
                    "200": {
                        "description": "layer response",
                        "schema": {
                            "$ref": "#/definitions/Layer"
                        }
                    }
                }
            },
            "post": {
                "description": "add new layer",
                "operationId": "addLayer",
                "tags": [
                    "Layer"
                ],
                "parameters": [
                    {
                        "name": "body",
                        "in": "body",
                        "description": "new layer body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/LayerCreate"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "new layer response",
                        "schema": {
                            "$ref": "#/definitions/Layer"
                        }
                    }
                }
            }
        },
        "/api/layers/{id}": {
            "get": {
                "description": "Returns a single layer based on id",
                "operationId": "getLayerById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of layer to fetch",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "Layer"
                ],
                "responses": {
                    "200": {
                        "description": "layer response",
                        "schema": {
                            "$ref": "#/definitions/Layer"
                        }
                    }
                }
            },
            "put": {
                "description": "update a single layer based on id",
                "operationId": "updateLayerById",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of layer to update",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "body",
                        "in": "body",
                        "description": "layer update body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/LayerCreate"
                        }
                    }
                ],
                "tags": [
                    "Layer"
                ],
                "responses": {
                    "200": {
                        "description": "layer update response",
                        "schema": {
                            "$ref": "#/definitions/Layer"
                        }
                    }
                }
            },
            "delete": {
                "description": "deletes a single layer based on id",
                "operationId": "deleteLayer",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "id of layer to delete",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "Layer"
                ],
                "responses": {
                    "204": {
                        "description": "layer deleted"
                    }
                }
            }
        },
        "/api/events/{eventId}/layers": {
            "get": {
                "description": "get layers for the specified event",
                "operationId": "getLayersForEvent",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "id of the event to get layers for",
                        "required": true,
                        "type": "number"
                    }
                ],
                "tags": [
                    "Layer"
                ],
                "responses": {
                    "200": {
                        "description": "layer responses",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Layer"
                            }
                        }
                    }
                }
            }
        },
        "/api/events/{eventId}/layers/{layerId}/features": {
            "get": {
                "description": "get features for specified layer in event",
                "operationId": "getFeaturesForLayer",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "id of the event to get features for",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "layerId",
                        "in": "path",
                        "description": "id of the layer to get features for",
                        "required": true,
                        "type": "number"
                    }
                ],
                "tags": [
                    "Layer"
                ],
                "responses": {
                    "200": {
                        "description": "feature responses",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Feature"
                            }
                        }
                    }
                }
            }
        },
        "/api/events/{eventId}/locations": {
            "get": {
                "description": "get all locations",
                "operationId": "getLocations",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "id of event to get locations for",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "startDate",
                        "in": "query",
                        "type": "string",
                        "format": "dateTime"
                    },
                    {
                        "name": "endDate",
                        "in": "query",
                        "type": "string",
                        "format": "dateTime"
                    },
                    {
                        "name": "lastLocationId",
                        "description": "locationId of last item in previous page (paging)",
                        "in": "query",
                        "type": "string"
                    },
                    {
                        "name": "limit",
                        "description": "limit locations (paging)",
                        "in": "query",
                        "type": "number"
                    }
                ],
                "tags": [
                    "Location"
                ],
                "responses": {
                    "200": {
                        "description": "location response",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Feature"
                            }
                        }
                    }
                }
            },
            "post": {
                "description": "add new location for current user in the specified event",
                "operationId": "addLocation",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "id of event to post location to",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "body",
                        "in": "body",
                        "description": "new location body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/Feature"
                        }
                    }
                ],
                "tags": [
                    "Location"
                ],
                "responses": {
                    "200": {
                        "description": "location response"
                    }
                }
            },
            "put": {
                "description": "update timestamp on latest location for current user",
                "operationId": "updateLocation",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "id of event to update location to",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "body",
                        "in": "body",
                        "description": "new location body",
                        "schema": {
                            "properties": {
                                "timestamp": {
                                    "type": "string",
                                    "format": "dateTime"
                                }
                            }
                        }
                    }
                ],
                "tags": [
                    "Location"
                ],
                "responses": {
                    "200": {
                        "description": "location response"
                    }
                }
            }
        },
        "/api/events/{eventId}/locations/users": {
            "get": {
                "description": "get all locations grouped by user",
                "operationId": "getLocationsByUser",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "description": "id of event to update location to",
                        "required": true,
                        "type": "number"
                    },
                    {
                        "name": "startDate",
                        "in": "query",
                        "type": "string",
                        "format": "dateTime"
                    },
                    {
                        "name": "endDate",
                        "in": "query",
                        "type": "string",
                        "format": "dateTime"
                    },
                    {
                        "name": "lastLocationId",
                        "description": "locationId of last item in previous page (paging)",
                        "in": "query",
                        "type": "string"
                    },
                    {
                        "name": "limit",
                        "description": "limit locations (paging)",
                        "in": "query",
                        "type": "number"
                    }
                ],
                "tags": [
                    "Location"
                ],
                "responses": {
                    "200": {
                        "description": "location response",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Feature"
                            }
                        }
                    }
                }
            }
        },
        "/api/{exportType}": {
            "get": {
                "description": "export mage data (GeoJSON, KML or Shapefiles)",
                "operationId": "export",
                "produces": [
                    "application/zip"
                ],
                "parameters": [
                    {
                        "name": "exportType",
                        "in": "path",
                        "type": "string",
                        "required": true,
                        "enum": [
                            "geojson",
                            "kml",
                            "shapefile"
                        ]
                    },
                    {
                        "name": "startDate",
                        "in": "query",
                        "type": "string",
                        "format": "dateTime"
                    },
                    {
                        "name": "endDate",
                        "in": "query",
                        "type": "string",
                        "format": "dateTime"
                    },
                    {
                        "name": "layerIds",
                        "description": "ids of feature layers to export",
                        "in": "query",
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "fft",
                        "description": "export locations",
                        "in": "query",
                        "type": "boolean"
                    }
                ],
                "tags": [
                    "Export"
                ],
                "responses": {
                    "200": {
                        "description": "export response"
                    }
                }
            }
        }
    },
    "definitions": {
        "LoginRequest": {
            "required": [
                "username",
                "uid",
                "p***REMOVED***word"
            ],
            "properties": {
                "username": {
                    "type": "string"
                },
                "uid": {
                    "type": "string"
                },
                "p***REMOVED***word": {
                    "type": "string"
                }
            }
        },
        "LoginResponse": {
            "properties": {
                "token": {
                    "type": "string"
                },
                "expirationDate": {
                    "type": "string"
                },
                "user": {
                    "$ref": "#/definitions/User"
                },
                "role": {
                    "$ref": "#/definitions/Role"
                }
            }
        },
        "Role": {
            "required": [
                "id",
                "name",
                "description",
                "permissions"
            ],
            "properties": {
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "permissions": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "UserCreate": {
            "required": [
                "username",
                "firstname",
                "lastname"
            ],
            "properties": {
                "username": {
                    "type": "string"
                },
                "firstname": {
                    "type": "string"
                },
                "lastname": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "phone": {
                    "type": "string"
                },
                "active": {
                    "type": "boolean"
                },
                "role": {
                    "type": "string"
                },
                "p***REMOVED***word": {
                    "type": "string"
                },
                "p***REMOVED***wordConfirm": {
                    "type": "string"
                }
            }
        },
        "User": {
            "required": [
                "id",
                "username",
                "firstname",
                "lastname",
                "active",
                "role"
            ],
            "properties": {
                "id": {
                    "type": "string"
                },
                "username": {
                    "type": "string"
                },
                "firstname": {
                    "type": "string"
                },
                "lastname": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "active": {
                    "type": "boolean"
                },
                "role": {
                    "$ref": "#/definitions/Role"
                },
                "avatarUrl": {
                    "type": "string"
                },
                "iconUrl": {
                    "type": "string"
                }
            }
        },
        "Users": {
            "required": [
                "id",
                "username",
                "firstname",
                "lastname",
                "active",
                "role"
            ],
            "properties": {
                "id": {
                    "type": "string"
                },
                "username": {
                    "type": "string"
                },
                "firstname": {
                    "type": "string"
                },
                "lastname": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "active": {
                    "type": "boolean"
                },
                "role": {
                    "type": "string"
                },
                "avatarUrl": {
                    "type": "string"
                }
            }
        },
        "DeviceCreate": {
            "properties": {
                "uid": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "poc": {
                    "type": "string"
                },
                "registered": {
                    "type": "boolean",
                    "description": "boolean indicating if device is registered, ADMIN only"
                }
            }
        },
        "Device": {
            "required": [
                "id",
                "uid",
                "name",
                "description"
            ],
            "properties": {
                "id": {
                    "type": "string"
                },
                "uid": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "registered": {
                    "type": "boolean"
                }
            }
        },
        "TeamCreate": {
            "required": [
                "name"
            ],
            "properties": {
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "members": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/User"
                    }
                }
            }
        },
        "Team": {
            "required": [
                "id",
                "name"
            ],
            "properties": {
                "id": {
                    "type": "number"
                },
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "members": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/User"
                    }
                }
            }
        },
        "EventCreate": {
            "required": [
                "name"
            ],
            "properties": {
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "form": {
                    "$ref": "#/definitions/FormCreate"
                }
            }
        },
        "Event": {
            "required": [
                "id",
                "name"
            ],
            "properties": {
                "id": {
                    "type": "number"
                },
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "form": {
                    "$ref": "#/definitions/Form"
                },
                "teams": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Team"
                    }
                }
            }
        },
        "LayerCreate": {
            "required": [
                "name",
                "type",
                "url"
            ],
            "properties": {
                "name": {
                    "type": "string"
                },
                "type": {
                    "type": "string"
                },
                "url": {
                    "type": "string"
                },
                "base": {
                    "type": "boolean"
                },
                "format": {
                    "type": "string"
                }
            }
        },
        "Layer": {
            "required": [
                "id",
                "name",
                "type",
                "url"
            ],
            "properties": {
                "id": {
                    "type": "number"
                },
                "name": {
                    "type": "string"
                },
                "type": {
                    "type": "string"
                },
                "url": {
                    "type": "string"
                },
                "base": {
                    "type": "boolean"
                },
                "format": {
                    "type": "string"
                }
            }
        },
        "FormCreate": {
            "properties": {
                "name": {
                    "type": "string"
                },
                "variantField": {
                    "type": "string"
                },
                "fields": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Field"
                    }
                }
            }
        },
        "Form": {
            "properties": {
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "variantField": {
                    "type": "string"
                },
                "fields": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Field"
                    }
                }
            }
        },
        "Field": {
            "properties": {
                "id": {
                    "type": "number"
                },
                "name": {
                    "type": "string"
                },
                "title": {
                    "type": "string"
                },
                "type": {
                    "type": "string"
                },
                "value": {
                    "type": "string"
                },
                "required": {
                    "type": "boolean"
                },
                "choices": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Choice"
                    }
                }
            }
        },
        "Choice": {
            "properties": {
                "id": {
                    "type": "number"
                },
                "title": {
                    "type": "string"
                },
                "value": {
                    "type": "string"
                }
            }
        },
        "Feature": {
            "properties": {
                "id": {
                    "type": "number"
                },
                "type": {
                    "type": "string"
                },
                "geometry": {
                    "type": "object"
                },
                "properties": {
                    "type": "object"
                }
            }
        },
        "FeatureStateCreate": {
            "properties": {
                "name": {
                    "type": "string"
                },
                "url": {
                    "type": "string"
                },
                "userId": {
                    "type": "string"
                }
            }
        },
        "FeatureState": {
            "properties": {
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "url": {
                    "type": "string"
                },
                "userId": {
                    "type": "string"
                }
            }
        },
        "Attachment": {
            "properties": {
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "contentType": {
                    "type": "string"
                },
                "url": {
                    "type": "string"
                },
                "height": {
                    "type": "number"
                },
                "width": {
                    "type": "number"
                },
                "oriented": {
                    "type": "boolean"
                },
                "thumbnails": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Thumbnail"
                    }
                }
            }
        },
        "Thumbnail": {
            "properties": {
                "name": {
                    "type": "string"
                },
                "contentType": {
                    "type": "string"
                },
                "height": {
                    "type": "number"
                },
                "width": {
                    "type": "number"
                },
                "size": {
                    "type": "number"
                },
                "minDimension": {
                    "type": "number"
                }
            }
        }
    }
}