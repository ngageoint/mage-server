<section class="mat-typography">
    <h4>Settings</h4>
    <hr>
</section>
<section class="mat-typography">
    <table mat-table [dataSource]="dataSource" matSort>
        <ng-container matColumnDef="key">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Key </th>
            <td mat-cell *matCellDef="let setting">{{setting.displayKey}}</td>
        </ng-container>

        <ng-container matColumnDef="value">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Value </th>
            <td mat-cell *matCellDef="let setting">
                <ng-container *ngIf='setting.value; then visible else hidden'></ng-container>
                <ng-template #visible>
                    {{setting.value}}
                </ng-template>
                <ng-template #hidden>
                    *****
                </ng-template>
            </td>
        </ng-container>

        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Action </th>
            <td mat-cell *matCellDef="let setting">
                <ng-container *ngIf="setting.required; then editOnly else editDelete"></ng-container>
                <ng-template #editOnly>
                    <a href="javascript:void(0);" (click)="editSetting(setting)">Edit</a>
                </ng-template>
                <ng-template #editDelete>
                    <a href="javascript:void(0);" (click)="editSetting(setting)">Edit</a> |
                    <a href="javascript:void(0);" (click)="deleteSetting(setting)">Delete</a>
                </ng-template>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
</section>
<section class="mat-typography">
    <div *ngIf="editable">
        <legend>Add Setting</legend>
        <mat-list-item>
            <label for="inputKey" class="right-gap">Key</label>
            <mat-form-field appearance="outline">
                <input matInput type="text" id="inputKey" name="inputKey" [(ngModel)]="newRow.key"
                    [ngModelOptions]="{standalone: true}" placeholder="Key" #inputKey="ngModel" required>
            </mat-form-field>
            <label for="inputValue" class="right-gap">Value</label>
            <mat-form-field appearance="outline">
                <input matInput type="text" id="inputValue" name="inputValue" [(ngModel)]="newRow.value"
                    [ngModelOptions]="{standalone: true}" placeholder="Value" />
            </mat-form-field>
            <mat-checkbox class="left-gap" color="primary" [(ngModel)]="newRow.required">Required</mat-checkbox>
            <button class="left-gap" mat-stroked-button color="primary" (click)="addSetting()"
                [disabled]="inputKey.invalid">
                <mat-icon>add</mat-icon>Add Row
            </button>
        </mat-list-item>
    </div>
</section>