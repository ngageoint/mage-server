<!DOCTYPE html>
<html ng-app="mage">
<head>
  <title>MAGE</title>

  <link rel="shortcut icon" href="favicon.ico"/>
  <meta id="view" name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css"/>

  <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css"/>

  <link rel="stylesheet" href="bower_components/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="bower_components/Leaflet.awesome-markers/dist/leaflet.awesome-markers.css"/>
  <link rel="stylesheet" href="bower_components/leaflet.markercluster/dist/MarkerCluster.css"/>
  <link rel="stylesheet" href="bower_components/leaflet.markercluster/dist/MarkerCluster.Default.css"/>
  <link rel="stylesheet" href="bower_components/leaflet-sidebar/src/L.Control.Sidebar.css"/>
  <link rel="stylesheet" href="vendor/leaflet/leaflet.grouped.layer.control/leaflet.grouped.layer.control.css"/>

  <link rel="stylesheet" href="bower_components/angular-ui-select/dist/select.css"/>

  <link rel="stylesheet" href="css/icomoon.css"/>
  <link rel="stylesheet" href="css/style.css"/>
  <link rel="stylesheet" href="css/map.css"/>

  <link rel="apple-touch-icon" href="img/touch-icon-iphone.png" />
  <link rel="apple-touch-icon" sizes="72x72" href="img/touch-icon-ipad.png" />
  <link rel="apple-touch-icon" sizes="114x114" href="img/touch-icon-iphone-retina.png" />
  <link rel="apple-touch-icon" sizes="144x144" href="img/touch-icon-ipad-retina.png" />

  <!-- IE10 fix -->
  <script>
    (function() {
      L_PREFER_CANVAS = true;

      if ("-ms-user-select" in document.documentElement.style && navigator.userAgent.match(/IEMobile\/10\.0/)) {
        var msViewportStyle = document.createElement("style");
        msViewportStyle.appendChild(
          document.createTextNode("@-ms-viewport{width:auto!important}")
        );
        document.getElementsByTagName("head")[0].appendChild(msViewportStyle);
      }
    })();
  </script>

</head>
<body>

  <script type="text/javascript" src="bower_components/jquery/jquery.min.js"></script>

  <script type="text/javascript" src="bower_components/underscore/underscore-min.js"></script>
  <script type="text/javascript" src="bower_components/angular/angular.min.js"></script>
  <script type="text/javascript" src="bower_components/angular-resource/angular-resource.min.js"></script>
  <script type="text/javascript" src="bower_components/angular-sanitize/angular-sanitize.min.js"></script>
  <script type="text/javascript" src="bower_components/angular-route/angular-route.min.js"></script>

  <!-- TODO possibly move this -->
  <nav cl***REMOVED***="navbar navbar-default navbar-fixed-top" ng-controller="NavController">
      <!-- We use the fluid option here to avoid overriding the fixed width of a normal container within the narrow content columns. -->
      <div cl***REMOVED***="container">
        <div cl***REMOVED***="navbar-header">
          <button type="button" cl***REMOVED***="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-6">
            <span cl***REMOVED***="sr-only">Toggle navigation</span>
            <span cl***REMOVED***="icon-bar"></span>
            <span cl***REMOVED***="icon-bar"></span>
            <span cl***REMOVED***="icon-bar"></span>
          </button>

          <a cl***REMOVED***="navbar-brand" href="#/map">
            <i cl***REMOVED***="icon-magic icon-brand" style="margin-right:10px;"></i>MAGE
          </a>
        </div>

        <ul cl***REMOVED***="nav navbar-nav navbar-right" ng-show="myself" ng-cloak>
          <li ng-show="myself">
            <a href="#/user" cl***REMOVED***="nav-link" style="padding-top: 14px; padding-bottom: 10px;">
              <span>
                <img cl***REMOVED***="avatar-img" ng-src="{{myself.avatarUrl ? myself.avatarUrl + '?access_token=' + token : '/img/missing_photo.png'}}"/>
              </span>
              <i cl***REMOVED***="fa fa-icon-info icon-spacer"></i> {{myself.username}}
            </a>
          </li>
          <li ng-show="amAdmin">
            <a ng-href="#/admin" cl***REMOVED***="nav-link">
              <i cl***REMOVED***="icon-cogs icon-spacer"></i>
            </a>
          </li>
          <li>
            <a href="#/about" cl***REMOVED***="nav-link">
              <i cl***REMOVED***="fa fa-info-circle icon-spacer"></i>
            </a>
          </li>
          <li>
            <a ng-click="logout()" cl***REMOVED***="nav-link pointer">
              <i cl***REMOVED***="fa fa-sign-out icon-spacer"></i>
            </a>
          </li>
        </ul>

        <div cl***REMOVED***="collapse navbar-collapse" ng-if="location.path() === '/map'" ng-cloak>
          <ul cl***REMOVED***="nav navbar-nav">
            <li cl***REMOVED***="dropdown">
              <a cl***REMOVED***="pointer dropdown-toggle" ng-click="onFilterClick()">
                <i cl***REMOVED***="fa fa-filter icon-spacer"></i> Filter
              </a>
            </li>
            <li cl***REMOVED***="dropdown">
              <a href="javascript:void(0)" cl***REMOVED***="dropdown-toggle" data-toggle="dropdown">
                <i style="margin-right: 3px;" ng-cl***REMOVED***="pollingInterval == 0 ? 'fa fa-square-o' : 'fa fa-check-square-o'"></i> Live Update
                <b cl***REMOVED***="caret"></b>
              </a>
              <ul cl***REMOVED***="dropdown-menu">
                <li role="presentation" cl***REMOVED***="dropdown-header">Poll Time</li>
                <li>
                  <a ng-click="onPollingIntervalChanged('5000')" cl***REMOVED***="pointer">
                    <i ng-cl***REMOVED***="pollingInterval == 5000 ? 'fa fa-check-square-o' : 'fa fa-square-o'"></i>
                    5 Seconds
                  </a>
                </li>
                <li>
                  <a ng-click="onPollingIntervalChanged('30000')" cl***REMOVED***="pointer">
                    <i ng-cl***REMOVED***="pollingInterval == 30000 ? 'fa fa-check-square-o' : 'fa fa-square-o'"></i>
                    30 Seconds
                  </a>
                </li>
                <li>
                  <a ng-click="onPollingIntervalChanged('120000')" cl***REMOVED***="pointer">
                    <i ng-cl***REMOVED***="pollingInterval == 120000 ? 'fa fa-check-square-o' : 'fa fa-square-o'"></i>
                    2 Minutes
                  </a>
                </li>
                <li>
                  <a ng-click="onPollingIntervalChanged('300000')" cl***REMOVED***="pointer">
                    <i ng-cl***REMOVED***="pollingInterval == 300000 ? 'fa fa-check-square-o' : 'fa fa-square-o'"></i>
                    5 Minutes
                  </a>
                </li>
                <li>
                  <a ng-click="onPollingIntervalChanged('0')" cl***REMOVED***="pointer">
                    <i ng-cl***REMOVED***="pollingInterval == 0 ? 'fa fa-check-square-o' : 'fa fa-square-o'"></i>
                    No Polling
                  </a>
                </li>
              </ul>
            </li>
            <li cl***REMOVED***="dropdown">
              <a cl***REMOVED***="pointer dropdown-toggle" ng-click="onExportClick()">
                <i cl***REMOVED***="fa fa-download icon-spacer"></i> Export
              </a>
            </li>
          </ul>
        </div>

      </div>
    </nav>

  <div data-ng-view style="height: 100%"></div>

  <script type="text/javascript" src="bower_components/leaflet/dist/leaflet-src.js"></script>
  <script type="text/javascript" src="bower_components/Leaflet.awesome-markers/dist/leaflet.awesome-markers.min.js"></script>
  <script type="text/javascript" src="bower_components/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
  <script type="text/javascript" src="bower_components/leaflet-sidebar/src/L.Control.Sidebar.js"></script>

  <script type="text/javascript" src="bower_components/angular-ui-select/dist/select.min.js"></script>
  <script type="text/javascript" src="bower_components/moment/min/moment.min.js"></script>
  <script type="text/javascript" src="bower_components/jquery-file-download/src/Scripts/jquery.fileDownload.js"></script>

  <!-- Angular bootstrap fork from https://github.com/newmanw/bootstrap, fixes bug with datepicker -->
  <!-- TODO repull from bower if they ever accept pull request -->
  <script type="text/javascript" src="vendor/angular-bootstrap/ui-bootstrap-0.13.0-SNAPSHOT.min.js"></script>
  <script type="text/javascript" src="vendor/angular-bootstrap/ui-bootstrap-tpls-0.13.0-SNAPSHOT.min.js"></script>

  <script type="text/javascript" src="vendor/bootstrap/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="vendor/leaflet/leaflet.grouped.layer.control/leaflet.grouped.layer.control.js"></script>

  <script type="text/javascript" src="app/app.js"></script>
  <script type="text/javascript" src="app/mage/mage.controller.js"></script>
  <script type="text/javascript" src="app/mage/mage-nav.controller.js"></script>
  <script type="text/javascript" src="app/mage/leaflet.directive.js"></script>
  <script type="text/javascript" src="app/mage/feed.directive.js"></script>

  <script type="text/javascript" src="app/export/export.js"></script>
  <script type="text/javascript" src="app/filter/filter.js"></script>

  <script type="text/javascript" src="app/auth/http-auth-interceptor.js"></script>

  <script type="text/javascript" src="app/about/about.controller.js"></script>

  <script type="text/javascript" src="app/admin/admin.controller.js"></script>
  <script type="text/javascript" src="app/admin/devices/devices.controller.js"></script>
  <script type="text/javascript" src="app/admin/events/events.controller.js"></script>
  <script type="text/javascript" src="app/admin/events/events.filter.js"></script>
  <script type="text/javascript" src="app/admin/users/users.controller.js"></script>
  <script type="text/javascript" src="app/admin/teams/teams.controller.js"></script>
  <script type="text/javascript" src="app/admin/layers/layers.controller.js"></script>

  <script type="text/javascript" src="app/signin/signin.controller.js"></script>
  <script type="text/javascript" src="app/signup/signup.controller.js"></script>

  <script type="text/javascript" src="app/observation/observation-feed.directive.js"></script>
  <script type="text/javascript" src="app/observation/observation-attachment.directive.js"></script>
  <script type="text/javascript" src="app/observation/observation-map-clip.directive.js"></script>
  <script type="text/javascript" src="app/observation/observation-popup.directive.js"></script>
  <script type="text/javascript" src="app/observation/form/form.directive.js"></script>
  <script type="text/javascript" src="app/observation/form/field.directive.js"></script>
  <script type="text/javascript" src="app/observation/property/property.directive.js"></script>

  <script type="text/javascript" src="app/user/user.controller.js"></script>
  <script type="text/javascript" src="app/user/user-feed.directive.js"></script>
  <script type="text/javascript" src="app/user/user-avatar.directive.js"></script>
  <script type="text/javascript" src="app/user/user-icon.directive.js"></script>
  <script type="text/javascript" src="app/user/user-popup.directive.js"></script>

  <script type="text/javascript" src="app/leaflet-extensions/LocationMarker.js"></script>
  <script type="text/javascript" src="app/leaflet-extensions/LocationMarker.Popup.js"></script>
  <script type="text/javascript" src="app/leaflet-extensions/NewIcon.js"></script>
  <script type="text/javascript" src="app/leaflet-extensions/FixedWidthIcon.js"></script>
  <script type="text/javascript" src="app/leaflet-extensions/FixedWidthMarker.js"></script>
  <script type="text/javascript" src="app/leaflet-extensions/MageControls.js"></script>
  <script type="text/javascript" src="app/leaflet-extensions/WorldExtentControl.js"></script>

  <script type="text/javascript" src="app/factories/about.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/device.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/event.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/feature.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/filter.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/layer.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/local-storage.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/location.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/map.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/observation.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/polling.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/user.***REMOVED***.js"></script>

  <script type="text/javascript" src="app/factories/observation.resource.js"></script>
  <script type="text/javascript" src="app/factories/layer.resource.js"></script>
  <script type="text/javascript" src="app/factories/event.resource.js"></script>
  <script type="text/javascript" src="app/factories/team.resource.js"></script>
  <script type="text/javascript" src="app/factories/location.resource.js"></script>

  <script type="text/javascript" src="app/file-upload/file-browser.directive.js"></script>
  <script type="text/javascript" src="app/file-upload/file-upload.directive.js"></script>

  <script type="text/javascript" src="app/filters/moment.filter.js"></script>
  <script type="text/javascript" src="app/filters/paging-offset.filter.js"></script>
  <script type="text/javascript" src="app/filters/p***REMOVED***word.filter.js"></script>
  <script type="text/javascript" src="app/filters/user.filter.js"></script>

  <script type="text/javascript" src="app/debug/debug.controller.js"></script>

</body>

</html>
