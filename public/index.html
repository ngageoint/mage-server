 <!DOCTYPE html>
<html ng-app="mage">
<head>
  <title>MAGE</title>

  <link rel="shortcut icon" href="favicon.ico"/>
  <meta id="view" name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <link rel="stylesheet" href="vendor/jQuery-File-Upload/css/jquery.fileupload.css">
  <link rel="stylesheet" href="vendor/jQuery-File-Upload/css/jquery.fileupload-ui.css">
  <link rel="stylesheet" href="vendor/bootstrap/bootstrap.css" />
  <link rel="stylesheet" href="vendor/bootstrap/bootstrap-responsive.min.css"/>
  <link rel="stylesheet" href="vendor/jQuery-File-Upload/css/style.css">
  <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css"/>
  <link rel="stylesheet" href="css/icomoon.css"/>
  <link rel="stylesheet" href="vendor/leaflet/leaflet.css" />
  <link rel="stylesheet" href="vendor/leaflet/plugins/leaflet.awesomemarkers/leaflet.awesome-markers.css"/>
  <link rel="stylesheet" href="vendor/leaflet/plugins/leaflet.markercluster/MarkerCluster.css"/>
  <link rel="stylesheet" href="vendor/leaflet/plugins/leaflet.markercluster/MarkerCluster.Default.css"/>
  <link rel="stylesheet" href="vendor/leaflet/plugins/leaflet.control.sidebar/L.Control.Sidebar.css"/>
  <link rel="stylesheet" href="vendor/leaflet/plugins/leaflet.grouped.layer.control/leaflet.grouped.layer.control.css"/>
  <link rel="stylesheet" href="vendor/bootstrap-datepicker/css/datepicker.css"/>
  <link rel="stylesheet" href="vendor/bootstrap-timepicker/css/bootstrap-timepicker.min.css"/>
  <link rel="stylesheet" href="vendor/angular-plugins/ngQuickDate/ng-quick-date.css"/>
  <link rel="stylesheet" href="vendor/angular-plugins/ngQuickDate/ng-quick-date-plus-default-theme.css"/>
  <link rel="stylesheet" href="css/wtf-forms.css"/>
  <link rel="stylesheet" href="css/style.css"/>
  <link rel="stylesheet" href="css/map.css"/>

  <link rel="apple-touch-icon" href="img/touch-icon-iphone.png" />
  <link rel="apple-touch-icon" sizes="72x72" href="img/touch-icon-ipad.png" />
  <link rel="apple-touch-icon" sizes="114x114" href="img/touch-icon-iphone-retina.png" />
  <link rel="apple-touch-icon" sizes="144x144" href="img/touch-icon-ipad-retina.png" />

  <!-- IE10 fix -->
  <script>
    (function() {
      L_PREFER_CANVAS = true;

      if ("-ms-user-select" in document.documentElement.style && navigator.userAgent.match(/IEMobile\/10\.0/)) {
        var msViewportStyle = document.createElement("style");
        msViewportStyle.appendChild(
          document.createTextNode("@-ms-viewport{width:auto!important}")
        );
        document.getElementsByTagName("head")[0].appendChild(msViewportStyle);
      }
    })();
  </script>

</head>
<body>


  <script type="text/javascript" src="vendor/jquery/jquery.js"></script>
  <script type="text/javascript" src="vendor/underscore/underscore-min.js"></script>
  <script type="text/javascript" src="vendor/angular/1.3.12/angular.js"></script>
  <script type="text/javascript" src="vendor/angular/1.3.12/angular-resource.js"></script>
  <script type="text/javascript" src="vendor/angular/1.3.12/angular-sanitize.min.js"></script>
  <script type="text/javascript" src="vendor/angular/1.3.12/angular-route.min.js"></script>

  <!-- TODO possibly move this -->
  <header cl***REMOVED***="navbar navbar-fixed-top" ng-controller="NavController">
    <div cl***REMOVED***="navbar-inner">
      <div cl***REMOVED***="container" ng-show="myself">

        <a cl***REMOVED***="mage brand" href="#/map">
          <i cl***REMOVED***="icon-magic icon-brand" style="margin-right:10px;"></i>MAGE
        </a>

        <a cl***REMOVED***="btn btn-navbar" id="main-nav-collapse" data-toggle="collapse" data-target=".nav-collapse" ng-show="myself">
          <span cl***REMOVED***="icon-bar" style="color: #fff"></span>
          <span cl***REMOVED***="icon-bar" style="color: #000"></span>
          <span cl***REMOVED***="icon-bar"></span>
        </a>

        <ul cl***REMOVED***="nav pull-right">
          <li>
            <a href="#/user" cl***REMOVED***="nav-link">
              <span>
                <img cl***REMOVED***="avatar-img" ng-src="{{myself.avatarUrl ? myself.avatarUrl + '?access_token=' + token : '/img/missing_photo.png'}}"/>
              </span>
              <i cl***REMOVED***="fa fa-icon-info icon-spacer"></i> {{myself.username}}
            </a>
          </li>
          <li ng-show="amAdmin" bs-tooltip="'Admin'" data-placement="bottom">
            <a ng-href="#/admin" cl***REMOVED***="nav-link">
              <i cl***REMOVED***="icon-cogs icon-spacer"></i>
            </a>
          </li>
          <li>
            <a href="#/about" cl***REMOVED***="nav-link" bs-tooltip="'About'" data-placement="bottom">
              <i cl***REMOVED***="fa fa-info-circle icon-spacer"></i>
            </a>
          </li>
          <li>
            <a ng-click="logout()" cl***REMOVED***="nav-link pointer" bs-tooltip="'Sign out'" data-html="true" data-placement="bottom">
              <i cl***REMOVED***="fa fa-sign-out icon-spacer"></i>
            </a>
          </li>
        </ul>

        <div cl***REMOVED***="nav-collapse collapse" ng-show="location.path() === '/map'">
          <ul id="main-nav" cl***REMOVED***="nav navbar-nav">
            <li ng-cl***REMOVED***="{'active':  filter}" cl***REMOVED***="dropdown">
              <a cl***REMOVED***="pointer dropdown-toggle" ng-click="filter = !filter">
                <i cl***REMOVED***="fa fa-filter icon-spacer"></i> Filter
                <b cl***REMOVED***="caret"></b>
              </a>
            </li>
            <li cl***REMOVED***="dropdown">
              <a href="#" cl***REMOVED***="dropdown-toggle" data-toggle="dropdown">
                <i style="margin-right: 3px;" ng-cl***REMOVED***="pollingInterval == 0 ? 'fa fa-square-o' : 'fa fa-check-square-o'"></i> Live Update
                <b cl***REMOVED***="caret"></b>
              </a>
              <ul cl***REMOVED***="dropdown-menu">
                <li cl***REMOVED***="nav-header">Poll Time</li>
                <li>
                  <a ng-click="onPollingIntervalChanged('5000')" cl***REMOVED***="pointer">
                    <i ng-cl***REMOVED***="pollingInterval == 5000 ? 'fa fa-check-square-o' : 'fa fa-square-o'"></i>
                    5 Seconds
                  </a>
                </li>
                <li>
                  <a ng-click="onPollingIntervalChanged('30000')" cl***REMOVED***="pointer">
                    <i ng-cl***REMOVED***="pollingInterval == 30000 ? 'fa fa-check-square-o' : 'fa fa-square-o'"></i>
                    30 Seconds
                  </a>
                </li>
                <li>
                  <a ng-click="onPollingIntervalChanged('120000')" cl***REMOVED***="pointer">
                    <i ng-cl***REMOVED***="pollingInterval == 120000 ? 'fa fa-check-square-o' : 'fa fa-square-o'"></i>
                    2 Minutes
                  </a>
                </li>
                <li>
                  <a ng-click="onPollingIntervalChanged('300000')" cl***REMOVED***="pointer">
                    <i ng-cl***REMOVED***="pollingInterval == 300000 ? 'fa fa-check-square-o' : 'fa fa-square-o'"></i>
                    5 Minutes
                  </a>
                </li>
                <li>
                  <a ng-click="onPollingIntervalChanged('0')" cl***REMOVED***="pointer">
                    <i ng-cl***REMOVED***="pollingInterval == 0 ? 'fa fa-check-square-o' : 'fa fa-square-o'"></i>
                    No Polling
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </div>

        <!-- <div export/> TODO implement export for teams/events-->

      </div>


      <div style="padding: 10px;" cl***REMOVED***="container" ng-show="filter" ng-cloak>

        <div cl***REMOVED***="control-group">
          <label cl***REMOVED***="control-label" for="type">Event</label>
          <div cl***REMOVED***="controls">
            <select ng-model="event" ng-options="event as event.name for event in events | orderBy:'name'" ng-change="onEventChange(event)"></select>
          </div>
        </div>

        <div cl***REMOVED***="control-group">
          <label cl***REMOVED***="control-label" for="type">Time</label>
          <select ng-model="interval" ng-options="interval.label for interval in intervals" ng-change="onIntervalUpdate(interval)"></select>

          <div ng-show="interval.filter == 'custom'">
            <div>
              <div cl***REMOVED***="control-group">
                <label cl***REMOVED***="control-label">Start Date/Time</label>
                <quick-datepicker ng-model='customStartDate' icon-cl***REMOVED***='fa fa-calendar' time-format="HH:mm:ss" ng-change="onCustomIntervalChanged(interval)"></quick-datepicker>
                <button type="button" ng-click="localTime = !localTime" ngm-tap="localTime = !localTime" cl***REMOVED***="btn quickdate-button"><i cl***REMOVED***="fa fa-clock-o"></i><span ng-show="localTime"> Local (GMT {{localOffset}})</span><span ng-show="!localTime"> GMT (GMT +00:00)</span></button>
              </div>
            </div>

            <div>
              <div cl***REMOVED***="control-group">
                <label cl***REMOVED***="control-label">End Date/Time</label>
                <quick-datepicker ng-model='customEndDate' icon-cl***REMOVED***='fa fa-calendar' time-format="HH:mm:ss" ng-change="onCustomIntervalChanged(interval)"></quick-datepicker>
                <button type="button" ng-click="localTime = !localTime" ngm-tap="localTime = !localTime" cl***REMOVED***="btn quickdate-button"><i cl***REMOVED***="fa fa-clock-o"></i><span ng-show="localTime"> Local (GMT {{localOffset}})</span><span ng-show="!localTime"> GMT (GMT +00:00)</span></button>
              </div>
            </div>
          </div>
        </div>

        <button cl***REMOVED***="btn" ng-click="filter = false">Close</button>

      </div>

    </div>
  </header>

  <div data-ng-view></div>

  <script type="text/javascript" src="vendor/leaflet/leaflet-src.js"></script>
  <script type="text/javascript" src="vendor/leaflet/plugins/leaflet.awesomemarkers/leaflet.awesome-markers.min.js"></script>
  <script type="text/javascript" src="vendor/leaflet/plugins/leaflet.markercluster/leaflet.markercluster-src.js"></script>
  <script type="text/javascript" src="vendor/leaflet/plugins/leaflet.control.sidebar/L.Control.Sidebar.js"></script>
  <script type="text/javascript" src="vendor/leaflet/plugins/leaflet.grouped.layer.control/leaflet.grouped.layer.control.js"></script>

  <script type="text/javascript" src="vendor/ui-bootstrap/ui-bootstrap-0.6.0.js"></script>
  <script type="text/javascript" src="vendor/ui-bootstrap/ui-bootstrap-tpls-0.6.0.js"></script>

  <script type="text/javascript" src="vendor/angular-strap/js/angular-strap.js"></script>
  <script type="text/javascript" src="vendor/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
  <script type="text/javascript" src="vendor/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
  <script type="text/javascript" src="vendor/angular-plugins/ngQuickDate/ng-quick-date.js"></script>

  <script type="text/javascript" src="vendor/angular-plugins/http-auth-interceptor.js"></script>
  <script type="text/javascript" src="vendor/bootstrap/bootstrap.js"></script>
  <script type="text/javascript" src="vendor/moment/moment.min.js"></script>

  <script type="text/javascript" src="vendor/jQuery-File-Download/js/jquery.fileDownload.js"></script>

  <script type="text/javascript" src="app/app.js"></script>
  <script type="text/javascript" src="app/mage/mage.controller.js"></script>
  <script type="text/javascript" src="app/mage/mage-nav.controller.js"></script>
  <script type="text/javascript" src="app/mage/leaflet.directive.js"></script>
  <script type="text/javascript" src="app/mage/feed.directive.js"></script>

  <script type="text/javascript" src="app/about/about.controller.js"></script>

  <script type="text/javascript" src="app/admin/admin.controller.js"></script>
  <script type="text/javascript" src="app/admin/devices/devices.controller.js"></script>
  <script type="text/javascript" src="app/admin/events/events.controller.js"></script>
  <script type="text/javascript" src="app/admin/events/events.filter.js"></script>
  <script type="text/javascript" src="app/admin/users/users.controller.js"></script>
  <script type="text/javascript" src="app/admin/teams/teams.controller.js"></script>
  <script type="text/javascript" src="app/admin/layers/layers.controller.js"></script>

  <script type="text/javascript" src="app/signin/signin.controller.js"></script>
  <script type="text/javascript" src="app/signup/signup.controller.js"></script>

  <script type="text/javascript" src="app/observation/observation-feed.directive.js"></script>
  <script type="text/javascript" src="app/observation/observation-attachment.directive.js"></script>
  <script type="text/javascript" src="app/observation/observation-map-clip.directive.js"></script>
  <script type="text/javascript" src="app/observation/observation-popup.directive.js"></script>
  <script type="text/javascript" src="app/observation/form/form.directive.js"></script>
  <script type="text/javascript" src="app/observation/form/field.directive.js"></script>
  <script type="text/javascript" src="app/observation/property/property.directive.js"></script>

  <script type="text/javascript" src="app/user/user.controller.js"></script>
  <script type="text/javascript" src="app/user/user-feed.directive.js"></script>
  <script type="text/javascript" src="app/user/user-avatar.directive.js"></script>
  <script type="text/javascript" src="app/user/user-icon.directive.js"></script>
  <script type="text/javascript" src="app/user/user-popup.directive.js"></script>

  <script type="text/javascript" src="app/leaflet-extensions/LocationMarker.js"></script>
  <script type="text/javascript" src="app/leaflet-extensions/LocationMarker.Popup.js"></script>
  <script type="text/javascript" src="app/leaflet-extensions/NewIcon.js"></script>
  <script type="text/javascript" src="app/leaflet-extensions/FixedWidthIcon.js"></script>
  <script type="text/javascript" src="app/leaflet-extensions/FixedWidthMarker.js"></script>
  <script type="text/javascript" src="app/leaflet-extensions/MageControls.js"></script>

  <script type="text/javascript" src="app/factories/about.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/device.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/event.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/feature.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/filter.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/local-storage.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/location.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/map.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/observation.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/polling.***REMOVED***.js"></script>
  <script type="text/javascript" src="app/factories/user.***REMOVED***.js"></script>

  <script type="text/javascript" src="app/factories/observation.resource.js"></script>
  <script type="text/javascript" src="app/factories/layer.resource.js"></script>
  <script type="text/javascript" src="app/factories/event.resource.js"></script>
  <script type="text/javascript" src="app/factories/team.resource.js"></script>
  <script type="text/javascript" src="app/factories/location.resource.js"></script>

  <script type="text/javascript" src="app/file-upload/file-browser.directive.js"></script>
  <script type="text/javascript" src="app/file-upload/file-upload.directive.js"></script>

  <script type="text/javascript" src="app/filters/moment.filter.js"></script>
  <script type="text/javascript" src="app/filters/paging-offset.filter.js"></script>
  <script type="text/javascript" src="app/filters/p***REMOVED***word.filter.js"></script>
  <script type="text/javascript" src="app/filters/user.filter.js"></script>

  <script type="text/javascript" src="app/export/export.directive.js"></script>

  <script type="text/javascript" src="app/debug/debug.controller.js"></script>

</body>

</html>
