 <!DOCTYPE html>
<html ng-app="mage">
<head>
  <title>MAGE</title>

  <!-- Comment out the following line when running local -->
  <!--<base href="/mage/" />-->

  <link rel="shortcut icon" href="favicon.ico"/>
  <meta id="view" name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
<!--
  <link rel="stylesheet" href="vendor/jquery-ui/jquery-ui.css"/>
-->
  <link rel="stylesheet" href="vendor/jQuery-File-Upload/css/jquery.fileupload.css">
  <link rel="stylesheet" href="vendor/jQuery-File-Upload/css/jquery.fileupload-ui.css">
  <link rel="stylesheet" href="vendor/bootstrap/bootstrap.css" />
  <link rel="stylesheet" href="vendor/bootstrap/bootstrap-responsive.min.css"/>
  <link rel="stylesheet" href="vendor/jQuery-File-Upload/css/style.css">
  <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css"/>
  <link rel="stylesheet" href="css/icomoon.css"/>
  <link rel="stylesheet" href="vendor/leaflet/leaflet.css" />
  <link rel="stylesheet" href="vendor/leaflet/plugins/leaflet.awesomemarkers/leaflet.awesome-markers.css"/>
  <link rel="stylesheet" href="vendor/leaflet/plugins/leaflet.markercluster/MarkerCluster.css"/>
  <link rel="stylesheet" href="vendor/leaflet/plugins/leaflet.markercluster/MarkerCluster.Default.css"/>
  <link rel="stylesheet" href="vendor/leaflet/plugins/leaflet.control.sidebar/L.Control.Sidebar.css"/>
  <link rel="stylesheet" href="vendor/leaflet/plugins/leaflet.grouped.layer.control/leaflet.grouped.layer.control.css"/>
  <link rel="stylesheet" href="vendor/bootstrap-datepicker/css/datepicker.css"/>
  <link rel="stylesheet" href="vendor/bootstrap-timepicker/css/bootstrap-timepicker.min.css"/>
  <link rel="stylesheet" href="vendor/angular-plugins/ngQuickDate/ng-quick-date.css"/>
  <link rel="stylesheet" href="vendor/angular-plugins/ngQuickDate/ng-quick-date-plus-default-theme.css"/>
  <link rel="stylesheet" href="css/wtf-forms.css"/>
  <link rel="stylesheet" href="css/style.css"/>
  <link rel="stylesheet" href="css/map.css"/>

  <link rel="apple-touch-icon" href="img/touch-icon-iphone.png" />
  <link rel="apple-touch-icon" sizes="72x72" href="img/touch-icon-ipad.png" />
  <link rel="apple-touch-icon" sizes="114x114" href="img/touch-icon-iphone-retina.png" />
  <link rel="apple-touch-icon" sizes="144x144" href="img/touch-icon-ipad-retina.png" />

  <!-- IE10 fix -->
  <script>
    (function() {
      L_PREFER_CANVAS = true;

      if ("-ms-user-select" in document.documentElement.style && navigator.userAgent.match(/IEMobile\/10\.0/)) {
        var msViewportStyle = document.createElement("style");
        msViewportStyle.appendChild(
          document.createTextNode("@-ms-viewport{width:auto!important}")
        );
        document.getElementsByTagName("head")[0].appendChild(msViewportStyle);
      }
    })();
  </script>

</head>
<body>


  <script type="text/javascript" src="vendor/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="vendor/underscore/underscore-min.js"></script>
  <script type="text/javascript" src="vendor/angular/1.3.12/angular.js"></script>
  <script type="text/javascript" src="vendor/angular/1.3.12/angular-resource.js"></script>
  <script type="text/javascript" src="vendor/angular/1.3.12/angular-sanitize.min.js"></script>
  <script type="text/javascript" src="vendor/angular/1.3.12/angular-route.min.js"></script>

  <header cl***REMOVED***="navbar navbar-fixed-top" ng-controller="NavController">
    <div cl***REMOVED***="navbar-inner">
      <div cl***REMOVED***="container" ng-show="myself">

        <a cl***REMOVED***="mage brand" href="#/map">
          <i cl***REMOVED***="icon-magic icon-brand" style="margin-right:10px;"></i>MAGE
        </a>

        <a cl***REMOVED***="btn btn-navbar" id="main-nav-collapse" data-toggle="collapse" data-target=".nav-collapse" ng-show="myself">
          <span cl***REMOVED***="icon-bar" style="color: #fff"></span>
          <span cl***REMOVED***="icon-bar" style="color: #000"></span>
          <span cl***REMOVED***="icon-bar"></span>
        </a>

        <ul cl***REMOVED***="nav pull-right">
          <li>
            <a href="#/user" cl***REMOVED***="nav-link">
              <span>
                <img cl***REMOVED***="avatar-img" ng-src="{{myself.avatarUrl ? myself.avatarUrl + '?access_token=' + token : '/img/missing_photo.png'}}"/>
              </span>
              <i cl***REMOVED***="fa fa-icon-info icon-spacer"></i> {{myself.username}}
            </a>
          </li>
          <li ng-show="amAdmin" bs-tooltip="'Admin'" data-placement="bottom">
            <a ng-href="#/admin" cl***REMOVED***="nav-link">
              <i cl***REMOVED***="icon-cogs icon-spacer"></i>
            </a>
          </li>
          <li>
            <a href="#/about" cl***REMOVED***="nav-link" bs-tooltip="'About'" data-placement="bottom">
              <i cl***REMOVED***="fa fa-info-circle icon-spacer"></i>
            </a>
          </li>
          <li>
            <a ng-click="logout()" cl***REMOVED***="nav-link pointer" bs-tooltip="'Sign out'" data-html="true" data-placement="bottom">
              <i cl***REMOVED***="fa fa-sign-out icon-spacer"></i>
            </a>
          </li>
        </ul>

        <div cl***REMOVED***="nav-collapse collapse" ng-show="location.path() === '/map'">
          <ul id="main-nav" cl***REMOVED***="nav navbar-nav">
            <li ng-cl***REMOVED***="{'active':  filter}">
              <a cl***REMOVED***="pointer" ng-click="filter = !filter">
                <i cl***REMOVED***="fa fa-filter icon-spacer"></i> Filter
              </a>
            </li>
          </ul>
        </div>
      </div>

      <div style="padding: 10px;" cl***REMOVED***="container" ng-show="filter" ng-cloak>

        <div cl***REMOVED***="control-group">
          <label cl***REMOVED***="control-label" for="type">Event</label>
          <div cl***REMOVED***="controls">
            <select ng-model="event" ng-options="event as event.name for event in events"></select>
          </div>
        </div>

        <div cl***REMOVED***="control-group">
          <label cl***REMOVED***="control-label" for="type">Time</label>
          <select ng-model="interval" ng-options="o.label for o in intervals" ng-change="updateInterval()"></select>

          <div ng-show="interval.filter == 'custom'">
            <div>
              <div cl***REMOVED***="control-group">
                <label cl***REMOVED***="control-label">Start Date/Time</label>
                <quick-datepicker ng-model='filterStartDate' icon-cl***REMOVED***='fa fa-calendar' time-format="HH:mm:ss" ng-change="updateInterval()"></quick-datepicker>
                <button type="button" ng-click="localTime = !localTime" ngm-tap="localTime = !localTime" cl***REMOVED***="btn quickdate-button"><i cl***REMOVED***="fa fa-clock-o"></i><span ng-show="localTime"> Local (GMT {{localOffset}})</span><span ng-show="!localTime"> GMT (GMT +00:00)</span></button>
              </div>
            </div>

            <div>
              <div cl***REMOVED***="control-group">
                <label cl***REMOVED***="control-label">End Date/Time</label>
                <quick-datepicker ng-model='filterEndDate' icon-cl***REMOVED***='fa fa-calendar' time-format="HH:mm:ss" ng-change="updateInterval()"></quick-datepicker>
                <button type="button" ng-click="localTime = !localTime" ngm-tap="localTime = !localTime" cl***REMOVED***="btn quickdate-button"><i cl***REMOVED***="fa fa-clock-o"></i><span ng-show="localTime"> Local (GMT {{localOffset}})</span><span ng-show="!localTime"> GMT (GMT +00:00)</span></button>
              </div>
            </div>
          </div>
        </div>

      </div>

    </div>
  </header>


  <div data-ng-view></div>


  <script type="text/javascript" src="vendor/leaflet/leaflet-src.js"></script>
  <script type="text/javascript" src="vendor/leaflet/plugins/leaflet.awesomemarkers/leaflet.awesome-markers.min.js"></script>
  <script type="text/javascript" src="vendor/leaflet/plugins/leaflet.markercluster/leaflet.markercluster-src.js"></script>
  <script type="text/javascript" src="vendor/leaflet/plugins/leaflet.control.sidebar/L.Control.Sidebar.js"></script>
  <script type="text/javascript" src="vendor/leaflet/plugins/leaflet.grouped.layer.control/leaflet.grouped.layer.control.js"></script>

  <script type="text/javascript" src="vendor/ui-bootstrap/ui-bootstrap-0.6.0.js"></script>
  <script type="text/javascript" src="vendor/ui-bootstrap/ui-bootstrap-tpls-0.6.0.js"></script>

  <script type="text/javascript" src="vendor/angular-strap/js/angular-strap.js"></script>
  <script type="text/javascript" src="vendor/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
  <script type="text/javascript" src="vendor/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
  <script type="text/javascript" src="vendor/angular-plugins/ngQuickDate/ng-quick-date.js"></script>


  <script type="text/javascript" src="vendor/angular-plugins/http-auth-interceptor.js"></script>
  <script type="text/javascript" src="vendor/bootstrap/bootstrap.js"></script>
  <script type="text/javascript" src="vendor/moment/moment.min.js"></script>
  <script type="text/javascript" src="js/app/leaflet/LocationMarker.js"></script>
  <script type="text/javascript" src="js/app/leaflet/LocationMarker.Popup.js"></script>
  <script type="text/javascript" src="js/app/leaflet/MageControls.js"></script>
  <script type="text/javascript" src="js/app/leaflet/SelectableMarker.js"></script>
  <script type="text/javascript" src="js/app/app.js"></script>
  <script type="text/javascript" src="js/app/directives/leaflet-directive.js"></script>
  <script type="text/javascript" src="js/app/directives/filter-navbar.js"></script>
  <script type="text/javascript" src="js/app/directives/user-location.js"></script>
  <script type="text/javascript" src="js/app/directives/user-id.js"></script>
  <script type="text/javascript" src="js/app/directives/device-id.js"></script>
  <script type="text/javascript" src="js/app/directives/user-location-news-item.js"></script>
  <script type="text/javascript" src="js/app/directives/observation-news-item.js"></script>
  <script type="text/javascript" src="js/app/directives/attachment.js"></script>
  <script type="text/javascript" src="js/app/directives/map-clip.js"></script>
  <script type="text/javascript" src="js/app/directives/news-feed.js"></script>
  <script type="text/javascript" src="js/app/directives/export.js"></script>
  <script type="text/javascript" src="js/app/directives/filter.js"></script>
  <script type="text/javascript" src="js/app/directives/rotated-image.js"></script>
  <script type="text/javascript" src="js/app/directives/simpleUpload.js"></script>
  <script type="text/javascript" src="js/app/directives/form/field-directive.js"></script>
  <script type="text/javascript" src="js/app/directives/form/form-directive.js"></script>
  <script type="text/javascript" src="js/app/directives/form/import.js"></script>
  <script type="text/javascript" src="js/app/directives/property/property-view.js"></script>
  <script type="text/javascript" src="js/app/directives/user-avatar.js"></script>
  <script type="text/javascript" src="js/app/directives/user-icon.js"></script>
  <script type="text/javascript" src="js/app/directives/wtf-forms.js"></script>
  <script type="text/javascript" src="js/app/***REMOVED***s.js"></script>
  <script type="text/javascript" src="js/app/***REMOVED***s/ObservationService.js"></script>
  <script type="text/javascript" src="js/app/***REMOVED***s/AboutService.js"></script>
  <script type="text/javascript" src="js/app/***REMOVED***s/UserService.js"></script>
  <script type="text/javascript" src="js/app/***REMOVED***s/DeviceService.js"></script>
  <script type="text/javascript" src="js/app/***REMOVED***s/MapService.js"></script>
  <script type="text/javascript" src="js/app/***REMOVED***s/FilterService.js"></script>
  <script type="text/javascript" src="js/app/***REMOVED***s/LocationService.js"></script>
  <script type="text/javascript" src="js/app/***REMOVED***s/TimerService.js"></script>
  <script type="text/javascript" src="js/app/***REMOVED***s/HttpAuthService.js"></script>
  <script type="text/javascript" src="js/app/***REMOVED***s/mageLib.js"></script>
  <script type="text/javascript" src="js/app/***REMOVED***s/TimeBucketService.js"></script>
  <script type="text/javascript" src="js/app/***REMOVED***s/EventService.js"></script>
  <script type="text/javascript" src="js/app/controllers/AboutController.js"></script>
  <script type="text/javascript" src="js/app/controllers/DebugController.js"></script>
  <script type="text/javascript" src="js/app/controllers/MageController.js"></script>
  <script type="text/javascript" src="js/app/controllers/NavController.js"></script>
  <script type="text/javascript" src="js/app/controllers/SigninController.js"></script>
  <script type="text/javascript" src="js/app/controllers/SignupController.js"></script>
  <script type="text/javascript" src="js/app/controllers/UserController.js"></script>

  <script type="text/javascript" src="js/app/controllers/admin/AdminController.js"></script>
  <script type="text/javascript" src="js/app/controllers/admin/AdminDevicesController.js"></script>
  <script type="text/javascript" src="js/app/controllers/admin/AdminEventsController.js"></script>
  <script type="text/javascript" src="js/app/controllers/admin/AdminUsersController.js"></script>
  <script type="text/javascript" src="js/app/controllers/admin/AdminTeamsController.js"></script>
  <script type="text/javascript" src="js/app/controllers/admin/AdminLayersController.js"></script>


  <script type="text/javascript" src="js/app/resources/Observation.js"></script>
  <script type="text/javascript" src="js/app/resources/Layer.js"></script>
  <script type="text/javascript" src="js/app/resources/Event.js"></script>
  <script type="text/javascript" src="js/app/resources/Team.js"></script>

  <script type="text/javascript" src="js/app/filters/moment.js"></script>
  <script type="text/javascript" src="js/app/filters/p***REMOVED***word.js"></script>
  <script type="text/javascript" src="js/app/filters/user.js"></script>
  <script type="text/javascript" src="js/app/filters/event.js"></script>
  <script type="text/javascript" src="js/app/filters/offset.js"></script>

  <!-- file download -->
  <script type="text/javascript" src="vendor/jQuery-File-Download/js/jquery.fileDownload.js"></script>

    <script type="text/ng-template" id="myModalContent.html">
      <div cl***REMOVED***="modal-header">
          <h3>Token Expired, Please log in.</h3>
      </div>
      <div cl***REMOVED***="modal-body">
          <h3 cl***REMOVED***="top-gap-l">Mobile Analytic GEOINT Environment</h3>
      <form cl***REMOVED***="form">
        <div cl***REMOVED***="control-group">
          <label cl***REMOVED***="control-label" for="username">Username</label>
          <div cl***REMOVED***="controls">
            <input ng-model="username" name="username" type="text" autocapitalize="off"/>
          </div>
        </div>
        <div cl***REMOVED***="control-group">
          <label cl***REMOVED***="control-label" for="uid">UID</label>
          <div cl***REMOVED***="controls">
            <input ng-model="uid" name="uid" type="text" autocapitalize="off"/>
          </div>
        </div>
        <div cl***REMOVED***="control-group">
          <label cl***REMOVED***="control-label" for="p***REMOVED***word">P***REMOVED***word</label>
          <div cl***REMOVED***="controls">
            <input ng-model="p***REMOVED***word" name="p***REMOVED***word" type="p***REMOVED***word"/>
          </div>
        </div>
        <span>
          <button cl***REMOVED***="btn" ng-click="login({username: username, uid: uid, p***REMOVED***word: p***REMOVED***word})" ngm-tap="login({username: username, uid: uid, p***REMOVED***word: p***REMOVED***word})">Login</button>
        </span>
        <div cl***REMOVED***="top-gap-s alert alert-block" ng-show="status > 399">
          <h4>Failed login</h4>
          Please check your username, UID, and p***REMOVED***word and try again.
        </div>
      </form>
      </div>
    </script>

    <script type="text/ng-template" id="deleteLayer.html">
      <div cl***REMOVED***="modal-header">
        <h3>Please Confirm Delete '{{layer.name}}'</h3>
      </div>
      <div cl***REMOVED***="modal-body">
        <div cl***REMOVED***="row-fluid"><h4>Layer '{{layer.name}}' will be deleted.  <strong>This cannot be undone<strong>.  All data will be unrecoverable.</h4></div>
        <div cl***REMOVED***="row-fluid"><h4>Do you want to delete the layer '{{layer.name}}'?<h4></div>
        <span>
          <button cl***REMOVED***="btn btn-danger" ng-click="deleteLayer(layer, true)" ngm-tap="deleteLayer(layer, true)"><i cl***REMOVED***="icon-trash"> </i>Confirm Delete Layer</button>
          <button cl***REMOVED***="btn pull-right" ng-click="cancel()" ngm-tap="cancel()">Cancel</button>
        </span>
      </div>
    </script>

</body>

</html>
