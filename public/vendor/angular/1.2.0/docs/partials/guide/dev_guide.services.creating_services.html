<a href="http://github.com/angular/angular.js/edit/master/docs/content/guide/dev_guide.***REMOVED***s.creating_***REMOVED***s.ngdoc" cl***REMOVED***="improve-docs btn btn-primary"><i cl***REMOVED***="icon-edit"> </i> Improve this doc</a><h1><code ng:non-bindable=""></code>
<div><span cl***REMOVED***="hint"></span>
</div>
</h1>
<div><div cl***REMOVED***="developer-guide-page developer-guide-angular-***REMOVED***s-creating-***REMOVED***s-page"><p>While Angular offers several useful ***REMOVED***s, for any nontrivial application you&#39;ll find it useful
to write your own custom ***REMOVED***s. To do this you begin by registering a ***REMOVED*** factory function
with a module either via the <a href="api/angular.module"><code>Module#factory api</code></a> or directly
via the <a href="api/AUTO.$provide"><code>$provide</code></a> api inside of module config function.</p>
<p>All Angular ***REMOVED***s participate in <a href="guide/di">dependency injection (DI)</a> by registering
themselves with Angular&#39;s DI system (injector) under a <code>name</code> (id) as well as by declaring
dependencies which need to be provided for the factory function of the registered ***REMOVED***. The
ability to swap dependencies for mocks/stubs/dummies in tests allows for ***REMOVED***s to be highly
testable.</p>
<h2>Registering Services</h1>
<p>To register a ***REMOVED***, you must have a module that this ***REMOVED*** will be part of. Afterwards, you
can register the ***REMOVED*** with the module either via the <a href="api/angular.Module"><code>Module api</code></a> or
by using the <a href="api/AUTO.$provide"><code>$provide</code></a> ***REMOVED*** in the module configuration
function.The following pseudo-code shows both approaches:</p>
<p>Using the angular.Module api:
<pre cl***REMOVED***="prettyprint linenums">
var myModule = angular.module('myModule', []);
myModule.factory('***REMOVED***Id', function() {
  var shinyNewServiceInstance;
  //factory function body that constructs shinyNewServiceInstance
  return shinyNewServiceInstance;
});
</pre>
<p>Using the $provide ***REMOVED***:
<pre cl***REMOVED***="prettyprint linenums">
angular.module('myModule', [], function($provide) {
  $provide.factory('***REMOVED***Id', function() {
    var shinyNewServiceInstance;
    //factory function body that constructs shinyNewServiceInstance
    return shinyNewServiceInstance;
  });
});
</pre>
<p>Note that you are not registering a ***REMOVED*** instance, but rather a factory function that will
create this instance when called.</p>
<h1>Dependencies</h1>
<p>Services can not only be depended upon, but can also have their own dependencies. These can be specified
as arguments of the factory function. <a href="guide/di">Read more</a> about dependency injection (DI)
in Angular and the use of array notation and the $inject property to make DI annotation
minification-proof.</p>
<p>Following is an example of a very simple ***REMOVED***. This ***REMOVED*** depends on the <code>$window</code> ***REMOVED***
(which is p***REMOVED***ed as a parameter to the factory function) and is just a function. The ***REMOVED*** simply
stores all notifications; after the third one, the ***REMOVED*** displays all of the notifications by
window alert.</p>
<pre cl***REMOVED***="prettyprint linenums">
angular.module('myModule', [], function($provide) {
  $provide.factory('notify', ['$window', function(win) {
    var msgs = [];
    return function(msg) {
      msgs.push(msg);
      if (msgs.length == 3) {
        win.alert(msgs.join("\n"));
        msgs = [];
      }
    };
  }]);
});
</pre>
<h1>Instantiating Angular Services</h1>
<p>All ***REMOVED***s in Angular are instantiated lazily. This means that a ***REMOVED*** will be created
only when it is needed for instantiation of a ***REMOVED*** or an application component that depends on it.
In other words, Angular won&#39;t instantiate ***REMOVED***s unless they are requested directly or
indirectly by the application.</p>
<h1>Services as singletons</h2>
<p>Lastly, it is important to realize that all Angular ***REMOVED***s are application singletons. This means
that there is only one instance of a given ***REMOVED*** per injector. Since Angular is lethally allergic
to global state, it is possible to create multiple injectors, each with its own instance of a
given ***REMOVED***, but that is rarely needed, except in tests where this property is crucially
important.</p>
<h3>Related Topics</h2>
<ul>
<li><a href="guide/dev_guide.***REMOVED***s.understanding_***REMOVED***s">Understanding Angular Services</a></li>
<li><a href="guide/dev_guide.***REMOVED***s.managing_dependencies">Managing Service Dependencies</a></li>
<li><a href="guide/dev_guide.***REMOVED***s.injecting_controllers">Injecting Services Into Controllers</a></li>
<li><a href="guide/dev_guide.***REMOVED***s.testing_***REMOVED***s">Testing Angular Services</a></li>
</ul>
<h2>Related API</h3>
<ul>
<li><a href="api/ng">Angular Service API</a></li>
</ul>
</div></div>
