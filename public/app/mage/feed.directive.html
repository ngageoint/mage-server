<div class="new-obs-card form-chooser feed-card ng-animatable" ng-if="newObservationForms">
  <div class="feed-card-content">
    <observation-form-chooser 
      forms="newObservationForms" 
      on-form-picked="createObservation(form)" 
      on-form-close="cancelNewObservation()">
    </observation-form-chooser>
  </div>
</div>

<div class="new-obs-card view-obs-card feed-card ng-animatable" ng-if="newObservation">
  <div class="feed-card-content">
    <form-directive form="newObservationForm" form-observation="newObservation"></form-directive>
  </div>
</div>

<div class="new-obs-card view-obs-card feed-card ng-animatable" ng-if="viewObservation">
  <observation-view observation="viewObservation" event="event"></observation-view>
</div>

<div class="new-obs-card view-obs-card feed-card ng-animatable" ng-if="editObservation">
  <form-directive form="editForm" form-observation="editObservation"></form-directive>
</div>

<div class="mdc-tab-bar" role="tablist">
  <div class="mdc-tab-scroller">
    <div class="mdc-tab-scroller__scroll-area">
      <div class="mdc-tab-scroller__scroll-content">
        <button class="mdc-tab mdc-tab--active" aria-selected="true" role="tab" tabindex="0">
          <span class="mdc-tab__content">
            <span class="mdc-tab__icon material-icons" aria-hidden="true">place</span>
            <span class="mdc-tab__text-label">Observations</span>
          </span>
          <span class="mdc-tab-indicator mdc-tab-indicator--active">
            <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
          </span>
          <span class="mdc-tab__ripple"></span>
        </button>
        <button class="mdc-tab" role="tab" tabindex="1">
          <span class="mdc-tab__content">
            <span class="mdc-tab__icon material-icons" aria-hidden="true">supervisor_account</span>
            <span class="mdc-tab__text-label">People</span>
          </span>
          <span class="mdc-tab-indicator">
            <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
          </span>
          <span class="mdc-tab__ripple"></span>
        </button>
      </div>
    </div>
  </div>
</div>

<div class="observation-feed-container content content--active">
  <div class="mdc-chip-set mdc-chip-set--choice">
    <div class="mdc-chip mdc-chip--selected" ng-click="actionFilter = 'all'" ng-class="{'active': actionFilter === 'all'}">
      <span>All</span>
    </div>
    <div class="mdc-chip" ng-click="actionFilter = 'favorite'" ng-class="{'active': actionFilter === 'favorite'}">
      <span>Favorites</span>
    </div>
    <div class="mdc-chip" ng-click="actionFilter = 'important'" ng-class="{'active': actionFilter === 'important'}">
      <span>Important</span>
    </div>
    <div class="mdc-chip" ng-click="actionFilter = 'attachments'" ng-class="{'active': actionFilter === 'attachments'}">
      <span>Attachments</span>
    </div>
  </div>
  <div class="feed-content-padding-container">
    <div id="select" class="mdc-select mdc-select--outlined page-select-width">
      <input type="hidden" name="enhanced-select">
      <i class="mdc-select__dropdown-icon"></i>
      <div class="mdc-select__selected-text">{{observationPages[0][0].properties.timestamp | moment: 'fromNow'}}</div>
      <div class="mdc-select__menu mdc-menu mdc-menu-surface page-select-width">
        <ul class="mdc-list">
            <li class="mdc-list-item mdc-list-item--selected"
            data-value="observationPages[0[0].id">
            {{observationPages[0][0].properties.timestamp | moment: 'fromNow'}}
          </li>
          <li class="mdc-list-item"
            ng-if="!$first"
            ng-repeat="observationPage in observationPages track by observationPage[0].id"
            data-value="observationPage[0].id">
            {{observationPage[0].properties.timestamp | moment: 'fromNow'}}
          </li>
        </ul>
      </div>
      <div class="mdc-notched-outline">
      <div class="mdc-notched-outline__leading"></div>
      <div class="mdc-notched-outline__notch">
        <label class="mdc-floating-label">Observation Page</label>
      </div>
      <div class="mdc-notched-outline__trailing"></div>  
      </div>
    </div>
  </div>
  <div
    ng-class="(selectedObservation.id && selectedObservation.id !== observation.id) && 'inactive-feed-card'"
    ng-repeat="observation in observationPages[currentObservationPage] track by observation.id">
    <div event="event" observation-news-item="observation" selectedobservation-form="event.form" container-element="side-bar"></div>
  </div>
  <button class="mdc-fab app-fab--absolute" aria-label="New Observation" ng-click="createNewObservation()">
    <span class="mdc-fab__icon material-icons record">add</span>
  </button>
</div>

<div class="content">
  <div class="feed-page" ng-show="currentFeedPanel == 'peopleTab' && userPages.length">
    <select
      class="form-control"
      ng-model="currentUserPage"
      ng-options="userPages.indexOf(userPage) as userPage[0].location.properties.timestamp | moment: 'fromNow' for userPage in userPages">
    </select>
  </div>
  <div
    ng-class="(selectedUser && selectedUser.id !== user.id) && 'inactive-feed-card'"
    ng-repeat="user in userPages[currentUserPage] track by user.id">
    <div user-news-item="user" user-news-item-followable="true" user-news-item-follow="followUserId" container-element="side-bar"></div>
  </div>
</div>
