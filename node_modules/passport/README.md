# P***REMOVED***port

P***REMOVED***port is [Express](http://expressjs.com/)-compatible authentication
middleware for [Node.js](http://nodejs.org/).

P***REMOVED***port's sole purpose is to authenticate requests, which it does through an
extensible set of plugins known as _strategies_.  P***REMOVED***port does not mount
routes or ***REMOVED***ume any particular database schema, which maximizes flexiblity and
allows application-level decisions to be made by the developer.  The API is
simple: you provide P***REMOVED***port a request to authenticate, and P***REMOVED***port provides
hooks for controlling what occurs when authentication succeeds or fails.

## Install

    $ npm install p***REMOVED***port

## Usage

#### Strategies

P***REMOVED***port uses the concept of strategies to authenticate requests.  Strategies
can range from verifying username and p***REMOVED***word credentials, delegated
authentication using [OAuth](http://oauth.net/) (for example, via [Facebook](http://www.facebook.com/)
or [Twitter](http://twitter.com/)), or federated authentication using [OpenID](http://openid.net/).

Before authenticating requests, the strategy (or strategies) used by an
application must be configured.

    p***REMOVED***port.use(new LocalStrategy(
      function(username, p***REMOVED***word, done) {
        User.findOne({ username: username, p***REMOVED***word: p***REMOVED***word }, function (err, user) {
          done(err, user);
        });
      }
    ));

#### Sessions

P***REMOVED***port will maintain persistent login sessions.  In order for persistent
sessions to work, the authenticated user must be serialized to the session, and
deserialized when subsequent requests are made.

P***REMOVED***port does not impose any restrictions on how your user records are stored.
Instead, you provide functions to P***REMOVED***port which implements the necessary
serialization and deserialization logic.  In a typical application, this will be
as simple as serializing the user ID, and finding the user by ID when
deserializing.

    p***REMOVED***port.serializeUser(function(user, done) {
      done(null, user.id);
    });

    p***REMOVED***port.deserializeUser(function(id, done) {
      User.findById(id, function (err, user) {
        done(err, user);
      });
    });

#### Middleware

To use P***REMOVED***port in an [Express](http://expressjs.com/) or
[Connect](http://senchalabs.github.com/connect/)-based application, configure it
with the required `p***REMOVED***port.initialize()` middleware.  If your application uses
persistent login sessions (recommended, but not required), `p***REMOVED***port.session()`
middleware must also be used.

    app.configure(function() {
      app.use(express.static(__dirname + '/../../public'));
      app.use(express.cookieParser());
      app.use(express.bodyParser());
      app.use(express.session({ ***REMOVED***: 'keyboard cat' }));
      app.use(p***REMOVED***port.initialize());
      app.use(p***REMOVED***port.session());
      app.use(app.router);
    });

#### Authenticate Requests

P***REMOVED***port provides an `authenticate()` function, which is used as route
middleware to authenticate requests.

    app.post('/login', 
      p***REMOVED***port.authenticate('local', { failureRedirect: '/login' }),
      function(req, res) {
        res.redirect('/');
      });

## Examples

For a complete, working example, refer to the [login example](https://github.com/jaredhanson/p***REMOVED***port-local/tree/master/examples/login)
included in [p***REMOVED***port-local](https://github.com/jaredhanson/p***REMOVED***port-local).

## Strategies

P***REMOVED***port has a comprehensive set of **over 120** authentication strategies
covering social networking, enterprise integration, API ***REMOVED***s, and more.
The [complete list](https://github.com/jaredhanson/p***REMOVED***port/wiki/Strategies) is
available on the [wiki](https://github.com/jaredhanson/p***REMOVED***port/wiki).

The following table lists commonly used strategies:

|Strategy                                                       | Protocol                 |Developer                                       |
|---------------------------------------------------------------|--------------------------|------------------------------------------------|
|[Local](https://github.com/jaredhanson/p***REMOVED***port-local)         | HTML form                |[Jared Hanson](https://github.com/jaredhanson)  |
|[OpenID](https://github.com/jaredhanson/p***REMOVED***port-openid)       | OpenID                   |[Jared Hanson](https://github.com/jaredhanson)  |
|[BrowserID](https://github.com/jaredhanson/p***REMOVED***port-browserid) | BrowserID                |[Jared Hanson](https://github.com/jaredhanson)  |
|[Facebook](https://github.com/jaredhanson/p***REMOVED***port-facebook)   | OAuth 2.0                |[Jared Hanson](https://github.com/jaredhanson)  |
|[Google](https://github.com/jaredhanson/p***REMOVED***port-google)       | OpenID                   |[Jared Hanson](https://github.com/jaredhanson)  |
|[Google](https://github.com/jaredhanson/p***REMOVED***port-google-oauth) | OAuth / OAuth 2.0        |[Jared Hanson](https://github.com/jaredhanson)  |
|[Twitter](https://github.com/jaredhanson/p***REMOVED***port-twitter)     | OAuth                    |[Jared Hanson](https://github.com/jaredhanson)  |

## Related Modules

- [Locomotive](https://github.com/jaredhanson/locomotive) — Powerful MVC web framework
- [OAuthorize](https://github.com/jaredhanson/oauthorize) — OAuth ***REMOVED*** provider toolkit
- [OAuth2orize](https://github.com/jaredhanson/oauth2orize) — OAuth 2.0 authorization server toolkit
- [connect-ensure-login](https://github.com/jaredhanson/connect-ensure-login)  — middleware to ensure login sessions

The [modules](https://github.com/jaredhanson/p***REMOVED***port/wiki/Modules) page on the
[wiki](https://github.com/jaredhanson/p***REMOVED***port/wiki) lists other useful modules
that build upon or integrate with P***REMOVED***port.

## Tests

    $ npm install --dev
    $ make test

[![Build Status](https://secure.travis-ci.org/jaredhanson/p***REMOVED***port.png)](http://travis-ci.org/jaredhanson/p***REMOVED***port)

## Credits

  - [Jared Hanson](http://github.com/jaredhanson)

## License

[The MIT License](http://opensource.org/licenses/MIT)

Copyright (c) 2011-2013 Jared Hanson <[http://jaredhanson.net/](http://jaredhanson.net/)>
